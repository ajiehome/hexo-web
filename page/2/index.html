
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <title>阿杰之家</title>
        <meta name="author" content="ajiehome" />
        <meta name="description" content="山有扶苏，隰有荷华" />
        <meta name="keywords" content="ajiehome,阿杰之家" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <link rel="icon" href="https://static-argvchs.netlify.app/images/favicon.png" />
        <script src="https://static-argvchs.netlify.app/libs/vue/3.2.47/vue.global.prod.min.js"></script>
<link rel="preconnect" href="https://static-argvchs.netlify.app" crossorigin />
<link rel="stylesheet" href="https://static-argvchs.netlify.app/libs/font-awesome/6.3.0/css/all.min.css" />
<link rel="stylesheet" href="https://static-argvchs.netlify.app/css/fonts.min.css" />
<script> const mixins = {}; </script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://static-argvchs.netlify.app/libs/highlight.js/11.7.0/highlight.min.js"></script>
<link
    rel="stylesheet"
    href="https://static-argvchs.netlify.app/libs/highlight.js/11.7.0/styles/devibeans.min.css"
/>
<script src="/js/lib/highlight.js"></script>


<script src="https://static-argvchs.netlify.app/libs/KaTeX/0.16.4/katex.min.js"></script>
<script src="https://static-argvchs.netlify.app/libs/KaTeX/0.16.4/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://static-argvchs.netlify.app/libs/KaTeX/0.16.4/katex.min.css" />
<script src="/js/lib/math.js"></script>


<script src="/js/lib/preview.js"></script>





<script src="/js/lib/home.js"></script>

<script src="https://static-argvchs.netlify.app/libs/animejs/3.2.1/anime.min.js"></script>
<link rel="stylesheet" href="/css/main.css" />

    <meta name="generator" content="Hexo 6.3.0"></head>
    <body>
        <div id="layout">
            <transition name="fade">
                <div id="loading" v-show="loading">
                    <div id="loading-circle">
                        <h2>LOADING</h2>
                        <p>加载过慢请开启缓存 浏览器默认开启</p>
                        <img src="/images/loading.gif" />
                    </div>
                </div>
            </transition>
            <nav id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <div id="desktop-menu">
        <a class="title" href="/">
            <span>阿杰之家</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </div>
    <div id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;阿杰之家</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </div>
</nav>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

            <transition name="into">
                <div id="main" v-show="!loading">
                    <div id="home-head">
    <div id="home-background" ref="homeBackground" data-images="https://static-argvchs.netlify.app/images/background.jpg"></div>
    <div id="home-info" @click="homeClick">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>阿杰之家</h1>
                <h3>山有扶苏，隰有荷华</h3>
                <h5>山有扶苏，隰有荷华</h5>
            </div>
        </span>
    </div>
</div>
<div id="home-posts-wrap"  ref="homePostsWrap">
    <div id="home-posts">
        

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Java%E7%9A%84HashMap/">
        <h2 class="post-title">Java的HashMap</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="关于集合中的hashmap"><a href="#关于集合中的hashmap" class="headerlink" title="关于集合中的hashmap"></a>关于集合中的hashmap</h1><p>关于tableSizeFor方法：Returns a power of two size for the given target capacity.返回当前数的最小二次幂</p>
<p>默认初始化的hashmap大小为16个大小，默认的负载系数为0.75<br>负载系数的计算公式：f &#x3D; 当前实际数目 &#x2F; hashmap总数目<br>也就是说当存入的数目大于等于总容量乘以负载系数的时候就会进扩容操作<br>如果负载系数大于或者等于了规定的负载系数，则会进行hashmap的扩容</p>
<p>get、put：先求hash值，然后右移16位做高位对比，求出hash之后通过hash找到指定的桶，当发生hash冲突的时候，会在同一个桶内存在多个节点，当我们的节点数超过了8个的时候，会做红黑树与链表的转换</p>
<pre><code class="Java">if ((e = p.next) == null) &#123;
 p.next = newNode(hash, key, value, null);
 if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
   treeifyBin(tab, hash); //红黑树转换
 break;
&#125;
</code></pre>
<p>TREEIFY_THRESHOLD默认值为8，为树型阈值，在8以内使用链表，在8以外使用红黑树</p>
<p>hash表里面所用的hashcode方法中的<code>Objects.hashCode(key)</code>，都取自于Object的hashcode方法，而Object的hashcode方法的标注是<code>public native int hashCode();</code>，native是java与其他编程语言进行交互的声明保留字段，也就是说这里的hashCode()方法其实调用的是C&#x2F;C++的hashCode的计算hash值</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Java%E7%9A%84HashMap/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Java%E7%9A%84Vector/">
        <h2 class="post-title">Java的Vector</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h1><p>vector的存储单元是数组，在没有指定默认大小的时候，默认初始大小是10，vector和ArrayList的最大区别在线程安全</p>
<p>构造方法有：</p>
<ul>
<li>全参数构造：1、初始化大小，2、扩容大小</li>
<li>单参构造：初始化大小，扩容大小为0</li>
<li>无参构造：</li>
<li>集合参数：传入一个Collection的子类，进行拷贝创建</li>
</ul>
<p>扩容操作：Vector的扩容大小是基于扩容大小参数的，如果扩容参数为0就成倍扩大，否则就按照参数</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Java%E7%9A%84Vector/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Java%E8%AE%A1%E7%AE%97%E6%96%87%E4%BB%B6MD5/">
        <h2 class="post-title">Java计算文件MD5</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="计算文件的MD5"><a href="#计算文件的MD5" class="headerlink" title="计算文件的MD5"></a>计算文件的MD5</h1><pre><code class="java">public String md5(File file)&#123;
        try &#123;
            MessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);
            FileInputStream fileInputStream = new FileInputStream(file);
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            byte [] bytes = new byte[1024];
            int read = 0;
            while ((read=(fileInputStream.read(bytes)))!=-1)&#123;
                stream.write(bytes,0,read);
            &#125;
            fileInputStream.close();
            stream.close();
            byte[] byteArray = stream.toByteArray();
            md5.update(byteArray);
            byte[] digest = md5.digest();
            BigInteger bigInteger = new BigInteger(1,digest);
            //生成MD5的进制数
            return bigInteger.toString(16);
        &#125; catch (NoSuchAlgorithmException | IOException e) &#123;
            throw new ApplicationException(CodeType.SERVICE_ERROR, &quot;MD5转换失败&quot;);
        &#125;
    &#125;
</code></pre>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Java%E8%AE%A1%E7%AE%97%E6%96%87%E4%BB%B6MD5/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Jvm%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/">
        <h2 class="post-title">Jvm内存结构</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="JVM内存结构"><a href="#JVM内存结构" class="headerlink" title="JVM内存结构"></a><code>JVM</code>内存结构</h1><p>Java虚拟机分为五个部分：程序计数器、Java虚拟机栈、本地方法栈、堆、方法区</p>
<p><img src="https://camo.githubusercontent.com/9ab34e9114814b84731635c2b2cc2abd0084edc44d220602948742aa8ad83340/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f646f6f63732f6a766d406d61696e2f696d616765732f6a766d2d6d656d6f72792d7374727563747572652e6a7067"></p>
<p><strong>程序计数器（PC寄存器）</strong></p>
<p>定义：</p>
<ul>
<li>程序计数器是一块较小内存空间，是当前线程执行那条字节码的所在地址，如果当前线程正在执行的是一个本地方法（Native），那么此程序计数器为Undefined。</li>
</ul>
<p>作用：</p>
<ul>
<li>字节码解读器通过切换程序计数器的顺序，来改变当前执行的指令，从而实现程序的流程控制</li>
<li>在多线程的情况下，线程计数器记录的是当前线程的执行位置，当线程切换回来的时候，就知道上次线程的执行位置</li>
</ul>
<p>特点：</p>
<ul>
<li>是一块较小的空间</li>
<li>线程私有，每个线程都有自己的程序计数器</li>
<li>生命周期随着线程的诞生而诞生，随着线程的销毁而销毁</li>
<li>是唯一一个不会出现<code>OutOfMemoryError</code>的内存区域</li>
</ul>
<p><strong>Java虚拟机栈（Java栈）</strong></p>
<p><img src="https://camo.githubusercontent.com/109d4eff5b60971060cef6cb1e7923e274771d5e1655e0e5aabaf40df9f9aa6a/68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f646f6f63732f6a766d406d61696e2f696d616765732f6a766d2d737461636b2e6a7067"></p>
<p>定义：</p>
<ul>
<li>Java虚拟机栈是描述Java方法运行过程的内存模型，Java虚拟机栈会为每一个即将运行的方法创建一块帧栈内存，用于存放该方法运行过程中的一些信息，如局部变量表、操作数栈、动态链接、方法出口信息</li>
</ul>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Jvm%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Jvm%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/">
        <h2 class="post-title">Jvm垃圾收集器</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="垃圾收集器"><a href="#垃圾收集器" class="headerlink" title="垃圾收集器"></a>垃圾收集器</h1><p>新生代垃圾收集器</p>
<p>Serial垃圾收集器：是单线程的收集器，并且在垃圾收集的时候需要暂停所有的用户线程</p>
<p>ParNew垃圾收集器：是Serial收集器的多线程版本，在垃圾收集的时候一样需要暂停所有的用户线程，在多CPU条件下性能比Serial收集器要好，但是由于线程切换需要损耗一定的资源，所以在单CPU的环境下，性能不如Serial好</p>
<p>Parallel Scavenge垃圾收集器：</p>
<p>​	</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Jvm%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Jvm%E8%99%9A%E6%8B%9F%E6%9C%BA/">
        <h2 class="post-title">Jvm虚拟机</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="JVM虚拟机"><a href="#JVM虚拟机" class="headerlink" title="JVM虚拟机"></a>JVM虚拟机</h1><p>指针碰撞（bump the pointer）： 指在分配内存的时候，由于堆空间的内存是整齐规划的，一边是使用的内存，一边是空闲的内存，中间由指针分开，在移动指针进行内存分配的时候叫做内存分配</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/Jvm%E8%99%9A%E6%8B%9F%E6%9C%BA/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%94%9F%E6%88%90/">
        <h2 class="post-title">二维码生成</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="Zxing"><a href="#Zxing" class="headerlink" title="Zxing"></a>Zxing</h1><h3 id="POM文件的引入"><a href="#POM文件的引入" class="headerlink" title="POM文件的引入"></a>POM文件的引入</h3><pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;
    &lt;artifactId&gt;javase&lt;/artifactId&gt;
    &lt;version&gt;3.3.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="后端Controller的port代码"><a href="#后端Controller的port代码" class="headerlink" title="后端Controller的port代码"></a>后端Controller的port代码</h3><pre><code class="java"> @PortMapping(&quot;/qrCode/&quot;)
    public Object qrCode(@RequestParam(&quot;centext&quot;)String centext, HttpServletResponse response, HttpServletRequest request)&#123;
        Map&lt;EncodeHintType, Object&gt; hints = new HashMap&lt;&gt;(3);
        hints.put(EncodeHintType.CHARACTER_SET,&quot;UTF-8&quot;);
        hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H);
        hints.put(EncodeHintType.MARGIN,1);
        try &#123;
            response.setContentType(&quot;image/png;charset=UTF-8&quot;);
            ServletOutputStream outputStream = response.getOutputStream();
            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
            BitMatrix bitMatrix = new MultiFormatWriter().encode(context, BarcodeFormat.QR_CODE, 200, 200, hints);
            MatrixToImageWriter.writeToStream(bitMatrix,&quot;png&quot;,byteArrayOutputStream);
   //编码格式转换，由于前端用ajax设置img标签的src属性需要
  response.getOutputStream().write(Base64.encodeBase64(byteArrayOutputStream.toByteArray()));
            outputStream.flush();
            outputStream.close();
        &#125; catch (WriterException | IOException e) &#123;
            e.printStackTrace();
        &#125;
        //枚举内容替换成了字符串，不好展示
        return &#123;&quot;code&quot;:2001,&quot;message&quot;:&quot;二维码生成成功&quot;&#125;;
    &#125;
</code></pre>
<h3 id="前端js代码"><a href="#前端js代码" class="headerlink" title="前端js代码"></a>前端js代码</h3><pre><code class="javascript"> $(document).ready(function () &#123;
            $(&quot;#showQRCode&quot;).click(function () &#123;
                let inputText = $(&quot;#inputText&quot;).val();
                $.port(&#123;
                    url: &quot;/qrCode&quot;,
                    data: &#123;&quot;context&quot;:inputText&#125;,
                    dataType: &quot;application/json&quot;,
                    contentType: &quot;application/json&quot;,
                    responseType: &quot;blob&quot;,
                    accept:&quot;image/png&quot;,
                    success: function (response)&#123;
                        //后台的Base64编码作用于这里
                        $(&quot;#qrCode&quot;).attr(&quot;src&quot;,&quot;data:image/png;base64,&quot;+response);
                    &#125;,
                    error: function () &#123;
                        alert(&quot;请求错误&quot;);
                    &#125;
                &#125;)
            &#125;);
        &#125;);
</code></pre>
<h3 id="前端HTML代码"><a href="#前端HTML代码" class="headerlink" title="前端HTML代码"></a>前端HTML代码</h3><pre><code class="html">&lt;div&gt;
        &lt;img  id=&quot;qrCode&quot; style=&quot;padding-left: 20px&quot; alt=&quot;QRCode&quot; src=&quot;&quot;&gt;&lt;br/&gt;
        &lt;label for=&quot;inputText&quot;&gt;输入二维码内容：&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;inputText&quot;&gt;&lt;br/&gt;
        &lt;button id=&quot;showQRCode&quot;&gt;提交&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<hr>
<h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><p>*使用<strong>Zxing</strong>第三方jar包，使用<strong>MultiFormatWriter</strong>的<strong>encode()<strong>方法生成一个二维码类</strong>BitMatrix</strong>的对象，然后用<strong>MatrixToImageWriter</strong>的流写入方法<strong>writeToStream()<strong>以</strong>png</strong>的形式写入<strong>OutputStresam</strong>流中，如果需要，可以进行相应的编码转换。*</p>
<p><em><strong>如果使用get的方式，直接往img标签的src属性添加生成二维码的访问地址即可，并且不需要base64编码。</strong></em></p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%94%9F%E6%88%90/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%96%87%E4%BB%B6%E7%9A%84MD5/">
        <h2 class="post-title">计算文件的MD5</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Java%E5%9F%BA%E7%A1%80/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Java基础
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <hr>
<h2 id="title-计算文件的MD5date-2022-04-20-09-41-15-031updated-2022-10-13-14-57-26-724url-x2F-archives-x2F-ji-suan-wen-jian-de-md5categories-Javatags-Java-MD5"><a href="#title-计算文件的MD5date-2022-04-20-09-41-15-031updated-2022-10-13-14-57-26-724url-x2F-archives-x2F-ji-suan-wen-jian-de-md5categories-Javatags-Java-MD5" class="headerlink" title="title: 计算文件的MD5date: 2022-04-20 09:41:15.031updated: 2022-10-13 14:57:26.724url: &#x2F;archives&#x2F;ji-suan-wen-jian-de-md5categories:- Javatags:- Java- MD5"></a>title: 计算文件的MD5<br>date: 2022-04-20 09:41:15.031<br>updated: 2022-10-13 14:57:26.724<br>url: &#x2F;archives&#x2F;ji-suan-wen-jian-de-md5<br>categories:<br>- Java<br>tags:<br>- Java<br>- MD5</h2><pre><code class="java">public String md5(File file)&#123;
        try &#123;
            MessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);
            FileInputStream fileInputStream = new FileInputStream(file);
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            byte [] bytes = new byte[1024];
            int read = 0;
            while ((read=(fileInputStream.read(bytes)))!=-1)&#123;
                stream.write(bytes,0,read);
            &#125;
            fileInputStream.close();
            stream.close();
            byte[] byteArray = stream.toByteArray();
            md5.update(byteArray);
            byte[] digest = md5.digest();
            BigInteger bigInteger = new BigInteger(1,digest);
            //生成MD5的进制数
            return bigInteger.toString(16);
        &#125; catch (NoSuchAlgorithmException | IOException e) &#123;
            throw new ApplicationException(CodeType.SERVICE_ERROR, &quot;MD5转换失败&quot;);
        &#125;
    &#125;
</code></pre>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/Java%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%96%87%E4%BB%B6%E7%9A%84MD5/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/%E4%B8%AD%E9%97%B4%E4%BB%B6/Kafka%E5%AE%89%E8%A3%85/">
        <h2 class="post-title">Kafka安装</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                中间件
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>首先下载Kafka的二进制包，以及Kafka-Manager Cmak工具</p>
<p><a target="_blank" rel="noopener" href="https://downloads.apache.org/kafka/3.3.1/kafka_2.13-3.3.1.tgz">Kafka</a>(<a target="_blank" rel="noopener" href="https://downloads.apache.org/kafka/3.3.1/kafka_2.13-3.3.1.tgz">https://downloads.apache.org/kafka/3.3.1/kafka_2.13-3.3.1.tgz</a>)</p>
<p><a target="_blank" rel="noopener" href="https://github.com/yahoo/CMAK/releases/download/3.0.0.6/cmak-3.0.0.6.zip">Cmak</a>(<a target="_blank" rel="noopener" href="https://github.com/yahoo/CMAK/releases/download/3.0.0.6/cmak-3.0.0.6.zip">https://github.com/yahoo/CMAK/releases/download/3.0.0.6/cmak-3.0.0.6.zip</a>)</p>
<p>解压Kafka到<code>/opt</code>目录shell</p>
<pre><code class="shell">tar -zxvf kafka_2.13-3.3.1.tgz -C /opt
</code></pre>
<p>解压Cmak到<code>/opt</code>目录</p>
<pre><code class="shell">unzip cmak-3.0.0.6 -C /opt
</code></pre>
<p>修改cmak的application.properties<code>/opt/cmak-3.0.0.6/conf/application.properties</code>的如下信息</p>
<pre><code class="shell"># The address the socket server listens on. If not configured, the host name will be equal to the value of
# java.net.InetAddress.getCanonicalHostName(), with PLAINTEXT listener name, and port 9092.
#   FORMAT:
#     listeners = listener_name://host_name:port
#   EXAMPLE:
#     listeners = PLAINTEXT://your.host.name:9092
#listeners=PLAINTEXT://:9092

listeners=PLAINTEXT://10.254.0.2:9092

# Listener name, hostname and port the broker will advertise to clients.
# If not set, it uses the value for &quot;listeners&quot;.
#advertised.listeners=PLAINTEXT://your.host.name:9092
advertised.listeners=PLAINTEXT://10.254.0.2:9092

# Settings prefixed with &#39;kafka-manager.&#39; will be deprecated, use &#39;cmak.&#39; instead.
# https://github.com/yahoo/CMAK/issues/713
kafka-manager.zkhosts=&quot;kafka-manager-zookeeper:2181&quot;
#kafka-manager.zkhosts=$&#123;?ZK_HOSTS&#125;
kafka-manager.zkhosts=&quot;10.254.0.2:2181&quot;
cmak.zkhosts=&quot;kafka-manager-zookeeper:2181&quot;
#cmak.zkhosts=$&#123;?ZK_HOSTS&#125;
cmak.zkhosts=&quot;10.254.0.2:2181&quot;
</code></pre>
<p>构建如下脚本，一键启动Kafka所需要的Zookeeper服务、Kafka服务以及Cmak管理工具</p>
<pre><code class="shell">#!/bin/bash

option=$1

echo &quot;option $option&quot;

case $option in 

  &#39;start&#39;)

    # create kafka catalogue
    if [ -d &#39;/root/kafka&#39; ]; then
      echo &#39;kafka catalogue exists&#39;
    else 
      mkdir /root/kafka
      echo &#39;create kafka catalogue success&#39;
    fi
    # create kafka log catalogue
    if [ -d &quot;/root/kafka/log&quot; ]; then
      echo &#39;kafka log catalogue exists&#39;
    else
      mkdir /root/kafka/log
      echo &#39;create kafka log catalogue success&#39;
    fi
    #  create kafka pid catalogue
    if [ -d &#39;/root/kafka/pid&#39; ]; then
      echo &#39;kafka pid catalogue exists&#39;
    else
      mkdir /root/kafka/pid
      echo &#39;create kafka pid catalogue success&#39;
    fi
    # creare kafka zk log file 
    if [ -f &#39;/root/kafka/log/zk.log&#39; ]; then
      echo &#39;kafka zk log file already exists&#39;
    else 
      touch /root/kafka/log/zk.log
      echo &#39;create kafka zk log file success&#39;
    fi
    # create zk pid file 
    if [ -f &#39;/root/kafka/pid/zk-pid&#39; ]; then
      echo &#39;kafka zk pid file already exists&#39;
    else
      touch /root/kafka/pid/zk-pid
      echo &#39;create kafka zk pid file success&#39;
    fi

    nohup  /opt/kafka_2.13-3.3.1/bin/zookeeper-server-start.sh /opt/kafka_2.13-3.3.1/config/zookeeper.properties &gt; /root/kafka/log/zk.log 2&gt;&amp;1 &amp;
    echo $!
    echo $! &gt; /root/kafka/pid/zk-pid
    echo &#39;loading 1 minute ......&#39; 
    sleep 1m

    # create kafka server log file
    if [ -f &#39;/root/kafka/log/kafka.log&#39; ]; then
      echo &#39;kafka server log file exists&#39;
    else 
      touch /root/kafka/log/kafka.log
      echo &#39;create kafka server log file success&#39;
    fi
    # create kafka pid pid file
    if [ -f &#39;/root/kafka/pid/kafka-pid&#39; ]; then
      echo &#39;kafka server pid file exists&#39;
    else
      touch /root/kafka/pid/kafka-pid
      echo &#39;create kafka server pid file success&#39;
    fi

    export JMX_PORT=9999

    nohup /opt/kafka_2.13-3.3.1/bin/kafka-server-start.sh /opt/kafka_2.13-3.3.1/config/server.properties &gt; /root/kafka/log/kafka.log 2&gt;&amp;1 &amp;
    echo $!
    echo $! &gt; /root/kafka/pid/kafka-pid


    # create kafka-manager cmak log file
      if [ -f &#39;/root/kafka/log/cmak.log&#39; ]; then
        echo &#39;kafka manager cmak log file exists&#39;
      else
        touch /root/kafka/log/cmak.log
        echo &#39;create kafka manager cmak log file success&#39;
      fi
    # create kafka-manager cmak pid file
     if [ -f &#39;/root/kafka/pid/cmak-pid&#39; ]; then
       echo &#39;kafka manager cmak pid file exists&#39;
     else 
       touch /root/kafka/pid/cmak-pid
       echo &#39;create kafka manager cmak pid file success&#39;
     fi

    nohup bash /opt/cmak-3.0.0.6/bin/cmak &gt; /root/kafka/log/cmak.log 2&gt;&amp;1 &amp;
    echo $!
    echo $! &gt; /root/kafka/pid/cmak-pid

    echo &#39;loading 1 minute ......&#39;
    sleep 1m
    echo &#39;all server start success&#39;
  ;;

  &#39;stop&#39;)
    zk_pid=$(cat /root/kafka/pid/zk-pid)
    kill -9 $zk_pid
    echo &#39;kill zookeeper server success&#39;

    kafka_pid=$(cat /root/kafka/pid/kafka-pid)
    kill -9 $kafka_pid
    echo &#39;kill kafka server success&#39;

    cmak_pid=$(cat /root/kafka/pid/cmak-pid)
    kill -9 $cmak_pid
    echo &#39;kill kafka manager cmak success&#39;     
    rm -rf /opt/cmak-3.0.0.6/RUNNING_PID
  ;;

  *)
    echo &#39;option error&#39;
  ;;
esac
</code></pre>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/%E4%B8%AD%E9%97%B4%E4%BB%B6/Kafka%E5%AE%89%E8%A3%85/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/06/07/%E4%B8%AD%E9%97%B4%E4%BB%B6/RocketMQ%E4%B8%8ESystemd/">
        <h2 class="post-title">RocketMQ与Systemd</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                中间件
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/6/7
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="RocketMQ与Systemd"><a href="#RocketMQ与Systemd" class="headerlink" title="RocketMQ与Systemd"></a>RocketMQ与Systemd</h1><p>RocketMQ的安装比较简单，只需要提供了JAVA_HOME环境，之后运行对于的脚本即可，所以这里主要介绍的RocketMQ与Systemd的配置，结合Shell脚本，一次性的启用namsesrv和borker以及web管理工具<code>rocketmq-dashboard</code></p>
<h2 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h2><p>Java: openjdk-11</p>
<p>RocketMQ: <code>rocketmq-all-5.0.0-bin-release.zip</code><a target="_blank" rel="noopener" href="https://www.apache.org/dyn/closer.cgi?path=rocketmq/5.0.0/rocketmq-all-5.0.0-bin-release.zip">下载</a></p>
<p>RocketMQ Dashboard: <code>rocketmq-dashboard-rocketmq-dashboard-1.0.0.tar.gz</code> <a target="_blank" rel="noopener" href="https://github.com/apache/rocketmq-dashboard">源码地址,该项目需要自己编译成jar包</a></p>
<p>在下载了RocketMQ的二进制包之后，解压到指定位置，而后配置对于的<code>namesrv</code>和<code>borker</code>服务，systemd的服务配置在<code>/usr/lib/systemd/system/</code>或者<code>/etc/systemd/system/</code>目录下</p>
<p>rmq_namesrv.service</p>
<pre><code class="shell">[Unit]
Description=rocketmq namesrv
After=network.target

[Service]
Type=simple
ExecStart=/opt/rocketmq-all-5.0.0-bin-release/bin/mqnamesrv
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=//opt/rocketmq-all-5.0.0-bin-release/bin/mqshutdown namesrv

[Install]
WantedBy=mulitiple-rmq-namesrv.target
</code></pre>
<p>rmq_borker.service</p>
<pre><code class="shell">[Unit]
Description=rocketmq broker
After=network.target

[Service]
Type=simple
ExecStart=/opt/rocketmq-all-5.0.0-bin-release/bin/mqbroker -n localhost:9876 --enable-proxy
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/opt/rocketmq-all-5.0.0-bin-release/bin/mqshutdown broker

[Install]
WantedBy=multiple-rmq-broker.target
</code></pre>
<p>在配置了这两个服务之后，即可通过systemctl start&#x2F;stop&#x2F;restart来执行服务了，由于每次都需要启动<code>namesrv</code>和<code>borker</code>服务还有web管理工具过于麻烦，所以引入<code>shell</code>脚本进行处理</p>
<p>rocketmq.shell</p>
<pre><code class="shell">#!/bin/bash

instruct=$1

echo $instruct

case $instruct in
 &#39;start&#39;)
   systemctl start rmq_namesrv
   systemctl start rmq_borker
   export NAMSESRV_ADDR=localhost:9876
   nohup java -jar /opt/rocketmq-dashboard-rocketmq-dashboard-1.0.0/target/rocketmq-dashboard-1.0.0.jar &gt; /root/rocketmq-dashboard.log &amp;
   echo $! &gt; /root/rmq-d-pid
   echo &quot;RocketMQ Start SUCCESS PID: &quot; + $!
 ;;

 &#39;stop&#39;)
   systemctl stop rmq_namesrv
   systemctl stop rmq_borker
   PID=$(cat /root/rmq-d-pid)
   kill -9 $&#123;PID&#125;
   echo &quot;RocketMQ Stop SUCCESS&quot;
 ;;

 *)
   echo &quot;Input instruct error&quot;
 ;;
esac
</code></pre>
<p>可以通过执行该shell脚本对RocketMQ进行启动和关闭</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/06/07/%E4%B8%AD%E9%97%B4%E4%BB%B6/RocketMQ%E4%B8%8ESystemd/" class="go-post">阅读全文</a>
</div>


        <div class="page-current">
    <div class="prev">
        
        <a class="page-num" href="/">
            <i class="fa-solid fa-caret-left fa-fw"></i>
        </a>
        
    </div>
    <div class="page-index">
        
        <span>
            
            
            <a class="page-num" href="/">1</a>
        </span>
        
        <span class="current">2</span>
        
        <span>
            <a class="page-num" href="/page/3/">3</a>
            
            <a class="page-num" href="/page/4">4</a>
            
            
            <span class="page-omit">...</span>
            <a class="page-num" href="/page/9">9</a>
            
        </span>
        
    </div>
    <div class="next">
        
        <a class="page-num" href="/page/3/">
            <i class="fa-solid fa-caret-right fa-fw"></i>
        </a>
        
    </div>
</div>

    </div>
    
    <div id="home-card">
        <div id="card-div">
    <div class="card-style">
        <div class="avatar">
            <img src="https://static-argvchs.netlify.app/images/avatar.jpg" alt="avatar" />
        </div>
        <div class="name">ajiehome</div>
        <div class="description">
            <p>Welcome to ajiehome …</p>

        </div>
        
        <div class="icon-links">
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://github.com/ajiehome">
                    <i
                        class="fa-brands fa-github fa-fw"
                    ></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&uin=1728537059&site=qq&menu=yes">
                    <i
                        class="fa-brands fa-qq fa-fw"
                    ></i>
                </a>
            </span>
            
            <span class="icon-link">
                <a href="mailto:ajiehome1024@163.com">
                    <i
                        class="fa-solid fa-envelope fa-fw"
                    ></i>
                </a>
            </span>
            
        </div>
        
        
    </div>
</div>

    </div>
    
</div>

                    <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2023 阿杰之家
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;ajiehome
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

                </div>
            </transition>
            
            <transition name="fade">
                <div id="preview" ref="preview" v-show="previewShow">
                    <img id="preview-content" ref="previewContent" />
                </div>
            </transition>
            
        </div>
        <script src="/js/main.js"></script>
        <script>
            console.info("Welcome to Argvchs' blog!");
            if (!window.hasOwnProperty("ontouchstart")) {
                let html = '<canvas id="fireworks" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 32767"></canvas><script src="https://static-argvchs.netlify.app/js/fireworks.min.js"><\/script>';
                document.body.append(document.createRange().createContextualFragment(html));
            }
        </script>
        
    </body>
</html>
