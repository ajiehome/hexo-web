---
title: Redis描述
date: 2023-06-07 15:58:40
tags:
categories: 
- 数据库
---
# redis understand

**概述**

redis全称是 remote dictionary server（远程字典服务），是一个ANSI C语言编写、支持网络、可基于内存也可以持久化的日志型的 kay-value 数据库。

于mysql不同的是，redis的信息是存在于内存当中，读写速度快，每秒读写（iops）10w+，因此redis常被应用自缓存，另外redis也经常被用作分布式锁，redis支持事务、持久化、lua脚本、lru驱动事件、多种集群方案。

**数据类型**

redis有如下五种基础数据类型
1. String（字符串）
2. Hash（哈希）
3. List（列表）
4. Set（集合）
5. zset（有序集合）

三种特殊的数据结构类型
1. Geospatial
2. Hyperloglog
3. Bitmap



**缓存问题**

穿透：

指查询一个不存在的数据，redis查不到就往db中差，db也查不到就无法创建缓存，一直查就会一直请求数据库，进而给db带来压力

解决方案：

1. 接口API验证，避免非法请求，过滤非法值
2. 如果查询为空，我们也设置一个缓存，或者叫默认值，每次返回默认值即可，直到下次写入刷新，也要给缓存设置一定时间的过期
3. 布隆过滤，



雪崩：

指某一时刻，redis中大量的数据过期，而同时查询的数据量巨大，那么请求都将直接访问db，引起db的压力过大深圳down机

解决方案：

1. 把redis数据过期的时间做微调，也就是说，我们在给定的时间上，做微量偏移，使得过期的时间分布在一个范围内，而不是聚集在某一时刻
2. 单个redis宕机也会造成，这个时候要使用redis的集群服务



击穿：

击穿与雪崩很像，击穿是指某一个key过期，而当前的key又有很大的访问量，造成全部去访问db，造成压力过大宕机

解决方案：

1. 使用互斥锁方案，缓存失效的时候，不马上去加载db，而是先使用某些带返回的原子操作命令（就是给redis设置一个值，先让这个给值顶着，然后我跑去db拿数据刷新过来，保证只有一个db操作进入），成功了再去数据库加载数据
2. 永不过期，指不设置过期时间，在快过期的时候，由异步线程去刷新数据



